package com.nhsoft.report.model;



import com.nhsoft.report.shared.State;
import com.nhsoft.report.util.AppUtil;
import com.nhsoft.report.util.DateUtil;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

/**
 * PolicyDiscount generated by hbm2java
 */
public class PolicyDiscount implements java.io.Serializable {

	/**
	 * 
	 */
	private static final long serialVersionUID = 4548319770424855640L;
	private String policyDiscountNo;
	private String systemBookCode;
	private Date policyDiscountDateFrom;
	private Date policyDiscountDateTo;
	private Date policyDiscountTimeFrom;
	private Date policyDiscountTimeTo;
	private String policyDiscountAppliedBranch;
	private boolean policyDiscountMonActived;
	private boolean policyDiscountTuesActived;
	private boolean policyDiscountWedActived;
	private boolean policyDiscountThursActived;
	private boolean policyDiscountFridayActived;
	private boolean policyDiscountSatActived;
	private boolean policyDiscountSunActived;
	private State state;
	private Date policyDiscountCreateTime;
	private String policyDiscountCreator;
	private Date policyDiscountAuditTime;
	private String policyDiscountAuditor;
	private String policyDiscountMemo;
	private Date policyDiscountCancelTime;
	private String policyDiscountCancelOperator;
	private Integer branchNum;
	private BigDecimal policyDiscountBillMoney;
	private BigDecimal policyDiscountDiscount;
	private Boolean policyDiscountCardOnly;
	private String policyDiscountCardType;
	private String policyDiscountRepeatType;
	private Date policyDiscountRepeatEnd;
	private String policyDiscountType;
	private BigDecimal policyDiscountDiscountMoney;
	private BigDecimal policyDiscountTotalDiscount;
	private Boolean policyDiscountAssignedItem;
	private String policyDiscountAssignedType;
	private String policyDiscountAssignedCategory;
	private List<PolicyDiscountDetail> policyDiscountDetails = new ArrayList<PolicyDiscountDetail>();

	public PolicyDiscount() {
	}
	
	
	public String getPolicyDiscountAssignedType() {
		return policyDiscountAssignedType;
	}
	
	public void setPolicyDiscountAssignedType(String policyDiscountAssignedType) {
		this.policyDiscountAssignedType = policyDiscountAssignedType;
	}
	
	public String getPolicyDiscountAssignedCategory() {
		return policyDiscountAssignedCategory;
	}
	
	public void setPolicyDiscountAssignedCategory(String policyDiscountAssignedCategory) {
		this.policyDiscountAssignedCategory = policyDiscountAssignedCategory;
	}
	
	
	public Boolean getPolicyDiscountAssignedItem() {
		return policyDiscountAssignedItem;
	}

	public void setPolicyDiscountAssignedItem(Boolean policyDiscountAssignedItem) {
		this.policyDiscountAssignedItem = policyDiscountAssignedItem;
	}

	public String getPolicyDiscountNo() {
		return this.policyDiscountNo;
	}

	public void setPolicyDiscountNo(String policyDiscountNo) {
		this.policyDiscountNo = policyDiscountNo;
	}

	public String getSystemBookCode() {
		return this.systemBookCode;
	}

	public void setSystemBookCode(String systemBookCode) {
		this.systemBookCode = systemBookCode;
	}

	public Date getPolicyDiscountDateFrom() {
		return this.policyDiscountDateFrom;
	}

	public void setPolicyDiscountDateFrom(Date policyDiscountDateFrom) {
		this.policyDiscountDateFrom = policyDiscountDateFrom;
	}

	public Date getPolicyDiscountDateTo() {
		return this.policyDiscountDateTo;
	}

	public void setPolicyDiscountDateTo(Date policyDiscountDateTo) {
		this.policyDiscountDateTo = policyDiscountDateTo;
	}

	public Date getPolicyDiscountTimeFrom() {
		return this.policyDiscountTimeFrom;
	}

	public void setPolicyDiscountTimeFrom(Date policyDiscountTimeFrom) {
		this.policyDiscountTimeFrom = policyDiscountTimeFrom;
	}

	public Date getPolicyDiscountTimeTo() {
		return this.policyDiscountTimeTo;
	}

	public void setPolicyDiscountTimeTo(Date policyDiscountTimeTo) {
		this.policyDiscountTimeTo = policyDiscountTimeTo;
	}

	public boolean isPolicyDiscountMonActived() {
		return this.policyDiscountMonActived;
	}

	public void setPolicyDiscountMonActived(boolean policyDiscountMonActived) {
		this.policyDiscountMonActived = policyDiscountMonActived;
	}

	public boolean isPolicyDiscountTuesActived() {
		return this.policyDiscountTuesActived;
	}

	public void setPolicyDiscountTuesActived(boolean policyDiscountTuesActived) {
		this.policyDiscountTuesActived = policyDiscountTuesActived;
	}

	public boolean isPolicyDiscountWedActived() {
		return this.policyDiscountWedActived;
	}

	public void setPolicyDiscountWedActived(boolean policyDiscountWedActived) {
		this.policyDiscountWedActived = policyDiscountWedActived;
	}

	public boolean isPolicyDiscountThursActived() {
		return this.policyDiscountThursActived;
	}

	public void setPolicyDiscountThursActived(boolean policyDiscountThursActived) {
		this.policyDiscountThursActived = policyDiscountThursActived;
	}

	public boolean isPolicyDiscountFridayActived() {
		return this.policyDiscountFridayActived;
	}

	public void setPolicyDiscountFridayActived(boolean policyDiscountFridayActived) {
		this.policyDiscountFridayActived = policyDiscountFridayActived;
	}

	public boolean isPolicyDiscountSatActived() {
		return this.policyDiscountSatActived;
	}

	public void setPolicyDiscountSatActived(boolean policyDiscountSatActived) {
		this.policyDiscountSatActived = policyDiscountSatActived;
	}

	public boolean isPolicyDiscountSunActived() {
		return this.policyDiscountSunActived;
	}

	public Date getPolicyDiscountCreateTime() {
		return this.policyDiscountCreateTime;
	}

	public void setPolicyDiscountCreateTime(Date policyDiscountCreateTime) {
		this.policyDiscountCreateTime = policyDiscountCreateTime;
	}

	public String getPolicyDiscountCreator() {
		return this.policyDiscountCreator;
	}

	public void setPolicyDiscountCreator(String policyDiscountCreator) {
		this.policyDiscountCreator = policyDiscountCreator;
	}

	public Date getPolicyDiscountAuditTime() {
		return this.policyDiscountAuditTime;
	}

	public void setPolicyDiscountAuditTime(Date policyDiscountAuditTime) {
		this.policyDiscountAuditTime = policyDiscountAuditTime;
	}

	public String getPolicyDiscountAuditor() {
		return this.policyDiscountAuditor;
	}

	public void setPolicyDiscountAuditor(String policyDiscountAuditor) {
		this.policyDiscountAuditor = policyDiscountAuditor;
	}

	public String getPolicyDiscountMemo() {
		return this.policyDiscountMemo;
	}

	public void setPolicyDiscountMemo(String policyDiscountMemo) {
		this.policyDiscountMemo = policyDiscountMemo;
	}

	public Date getPolicyDiscountCancelTime() {
		return this.policyDiscountCancelTime;
	}

	public void setPolicyDiscountCancelTime(Date policyDiscountCancelTime) {
		this.policyDiscountCancelTime = policyDiscountCancelTime;
	}

	public String getPolicyDiscountCancelOperator() {
		return this.policyDiscountCancelOperator;
	}

	public void setPolicyDiscountCancelOperator(String policyDiscountCancelOperator) {
		this.policyDiscountCancelOperator = policyDiscountCancelOperator;
	}

	public Integer getBranchNum() {
		return this.branchNum;
	}

	public void setBranchNum(Integer branchNum) {
		this.branchNum = branchNum;
	}

	public BigDecimal getPolicyDiscountBillMoney() {
		return this.policyDiscountBillMoney;
	}

	public void setPolicyDiscountBillMoney(BigDecimal policyDiscountBillMoney) {
		this.policyDiscountBillMoney = policyDiscountBillMoney;
	}

	public BigDecimal getPolicyDiscountDiscount() {
		return this.policyDiscountDiscount;
	}

	public void setPolicyDiscountDiscount(BigDecimal policyDiscountDiscount) {
		this.policyDiscountDiscount = policyDiscountDiscount;
	}

	public Boolean getPolicyDiscountCardOnly() {
		return this.policyDiscountCardOnly;
	}

	public void setPolicyDiscountCardOnly(Boolean policyDiscountCardOnly) {
		this.policyDiscountCardOnly = policyDiscountCardOnly;
	}

	public String getPolicyDiscountRepeatType() {
		return this.policyDiscountRepeatType;
	}

	public void setPolicyDiscountRepeatType(String policyDiscountRepeatType) {
		this.policyDiscountRepeatType = policyDiscountRepeatType;
	}

	public Date getPolicyDiscountRepeatEnd() {
		return this.policyDiscountRepeatEnd;
	}

	public void setPolicyDiscountRepeatEnd(Date policyDiscountRepeatEnd) {
		this.policyDiscountRepeatEnd = policyDiscountRepeatEnd;
	}

	public String getPolicyDiscountAppliedBranch() {
		return policyDiscountAppliedBranch;
	}

	public void setPolicyDiscountAppliedBranch(String policyDiscountAppliedBranch) {
		this.policyDiscountAppliedBranch = policyDiscountAppliedBranch;
	}

	public State getState() {
		return state;
	}

	public void setState(State state) {
		this.state = state;
	}

	public String getPolicyDiscountCardType() {
		return policyDiscountCardType;
	}

	public void setPolicyDiscountCardType(String policyDiscountCardType) {
		this.policyDiscountCardType = policyDiscountCardType;
	}

	public List<PolicyDiscountDetail> getPolicyDiscountDetails() {
		return policyDiscountDetails;
	}

	public void setPolicyDiscountDetails(List<PolicyDiscountDetail> policyDiscountDetails) {
		this.policyDiscountDetails = policyDiscountDetails;
	}

	public void setPolicyDiscountSunActived(boolean policyDiscountSunActived) {
		this.policyDiscountSunActived = policyDiscountSunActived;
	}

	public String getPolicyDiscountType() {
		return policyDiscountType;
	}

	public void setPolicyDiscountType(String policyDiscountType) {
		this.policyDiscountType = policyDiscountType;
	}

	public BigDecimal getPolicyDiscountDiscountMoney() {
		return policyDiscountDiscountMoney;
	}

	public void setPolicyDiscountDiscountMoney(BigDecimal policyDiscountDiscountMoney) {
		this.policyDiscountDiscountMoney = policyDiscountDiscountMoney;
	}

	public BigDecimal getPolicyDiscountTotalDiscount() {
		return policyDiscountTotalDiscount;
	}

	public void setPolicyDiscountTotalDiscount(BigDecimal policyDiscountTotalDiscount) {
		this.policyDiscountTotalDiscount = policyDiscountTotalDiscount;
	}

	public String createNoticeText(List<PosItem> posItems){
		StringBuffer sb = new StringBuffer();
		sb.append("促销政策—超额折扣");
		if(policyDiscountBillMoney != null && policyDiscountDiscount != null){
			sb.append("(").append(String.format("促销单据金额%s, 折扣%s", policyDiscountBillMoney.setScale(2, BigDecimal.ROUND_HALF_UP).toString(), 
					policyDiscountDiscount.setScale(2, BigDecimal.ROUND_HALF_UP).toString())).append(")");
		}

		sb.append(String.format("  单据号[%s]即将到期", policyDiscountNo)).append(AppUtil.getSeperate());
		sb.append(String.format("促销日期:%s 至 %s 促销时间:%s 至 %s", DateUtil.getDateStr(policyDiscountDateFrom), DateUtil.getDateStr(policyDiscountDateTo)
				, DateUtil.getHHmmStr(policyDiscountTimeFrom), DateUtil.getHHmmStr(policyDiscountTimeTo))).append(AppUtil.getSeperate());
		sb.append(AppUtil.getSeperate());
		int maxItemNameLength = 0;
		for(int i = 0;i < policyDiscountDetails.size();i++){
			PolicyDiscountDetail policyDiscountDetail = policyDiscountDetails.get(i);
			Integer itemNum = policyDiscountDetail.getItemNum();
			PosItem posItem = AppUtil.getPosItem(itemNum, posItems);
			if(posItem == null){
				continue;
			}
			policyDiscountDetail.setPosItem(posItem);
			String itemName = posItem.getItemCode() + "|" + posItem.getItemName();
			int length = AppUtil.getStringWidth(itemName);
			if(length > maxItemNameLength){
				maxItemNameLength = length;
			}
		}
		sb.append("例外商品");
		sb.append(AppUtil.getSeperate());
		for(int i = 0;i < policyDiscountDetails.size();i++){
			PolicyDiscountDetail policyDiscountDetail = policyDiscountDetails.get(i);
			if(policyDiscountDetail.getPosItem() == null){
				continue;
			}
			String item = policyDiscountDetail.getPosItem().getItemCode() + "|" + policyDiscountDetail.getPosItem().getItemName();
			sb.append(item);
			sb.append(AppUtil.getSeperate());
		}
		return sb.toString();
	}

}
